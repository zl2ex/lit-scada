{"version":3,"file":"lit-datatable-column.js","sourceRoot":"","sources":["lit-datatable-column.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  LitElement, css, html, PropertyValues\n} from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\nimport './helpers/ld-header-with-sort';\nimport './helpers/ld-header-with-filter';\nimport './helpers/ld-header-with-date-and-sort';\nimport './helpers/ld-header-with-filter-and-sort';\nimport './helpers/ld-header-with-choices';\nimport { Language } from './localize';\nimport type { Choice } from './helpers/ld-header-with-choices';\n\ntype TypeOfColumn = 'sort' | 'filter' | 'choices' | 'dateSortNoRange' | 'dateSort' | 'filterSort';\n\n@customElement('lit-datatable-column')\nexport class LitDatatableColumn extends LitElement {\n  @property({ type: String }) property = '';\n\n  @property({ type: Array }) otherProperties: Array<string> = [];\n\n  @property({ attribute: false }) html: ((value: any, otherValues?: any) => any) | null = null;\n\n  @property({ type: Array }) eventsForDom: Array<EventListener> = [];\n\n  @property({ type: String }) sort = '';\n\n  @property({ type: Boolean }) enableFilter = false;\n\n  @property({ type: String }) type?: TypeOfColumn = undefined;\n\n  @property({ type: String }) language: Language = 'en';\n\n  @property({ attribute: false }) sortEvent: EventListener | null = null;\n\n  @property({ attribute: false }) choicesEvent: EventListener | null = null;\n\n  @property({ attribute: false }) dateSortEvent: EventListener | null = null;\n\n  @property({ attribute: false }) filterEvent: EventListener | null = null;\n\n  @property({ type: String }) filterValue = '';\n\n  @property({ type: Array }) choices: Array<Choice> = [];\n\n  @property({ type: Array }) selectedChoices: Array<string> = [];\n\n  @property({ type: String }) start = '';\n\n  @property({ type: String }) end = '';\n\n  @property({ type: String }) horizontalAlign: 'left' | 'right' = 'left';\n\n  @property({ type: Boolean }) column = false;\n\n  @property({ type: Boolean }) header = false;\n\n  @property({ type: String }) columnStyle = '';\n\n  timeoutFilterText = 0;\n\n  static get styles() {\n    const mainStyle = css`\n      :host {\n        display: block;\n      }\n    `;\n\n    return [mainStyle];\n  }\n\n  render() {\n    return null;\n  }\n\n  updated(properties: PropertyValues) {\n    if (properties.has('html')) {\n      this.dispatchEvent(new CustomEvent('html-changed'));\n    }\n\n    if (properties.has('type') || properties.has('sort')) {\n      if (this.type === 'sort') {\n        this.html = (value: string, p: string) => html`\n          <ld-header-with-sort\n            .language=\"${this.language}\"\n            data-property=\"${p}\"\n            @direction-changed=\"${this.handleSortDirectionChanged.bind(this, p)}\"\n            .direction=\"${this.getSortDirection(this.sort, p)}\">\n            ${value}\n          </ld-header-with-sort>`;\n      }\n    }\n\n    if (properties.has('type') || properties.has('filterValue')) {\n      if (this.type === 'filter') {\n        this.html = (value: string, p: string) => html`\n          <ld-header-with-filter\n            .active=\"${!!this.filterValue}\"\n            .filterValue=\"${this.filterValue}\"\n            .language=\"${this.language}\"\n            .header=\"${value}\"\n            .property=\"${p}\"\n            @filter-value-changed=\"${this.handleFilterTextChanged.bind(this)}\">\n            ${value}\n          </ld-header-with-filter>`;\n      }\n    }\n\n    if (properties.has('type') || properties.has('choices') || properties.has('selectedChoices')) {\n      if (this.type === 'choices') {\n        this.html = (value: string, p: string) => html`\n          <ld-header-with-choices\n            .choices=\"${this.choices}\"\n            .enableFilter=${this.enableFilter}\n            .selectedChoices=\"${this.selectedChoices}\"\n            .property=\"${p}\"\n            @selected-choices-changed=\"${this.handleFilterChoiceChanged.bind(this)}\">\n            ${value}\n          </ld-header-with-choices>`;\n      }\n    }\n\n    if (properties.has('type') || properties.has('start') || properties.has('stop') || properties.has('sort')) {\n      if (this.type === 'dateSort') {\n        this.html = (value: string, p: string) => html`\n          <ld-header-with-date-and-sort\n            .horizontalAlign=\"${this.horizontalAlign}\"\n            dateFormat=\"dd/MM/yyyy\"\n            data-property=\"${p}\"\n            .property=\"${p}\"\n            @direction-changed=\"${this.handleSortDirectionChanged.bind(this, p)}\"\n            .direction=\"${this.getSortDirection(this.sort, p)}\"\n            .locale=\"${this.language}\"\n            .language=\"${this.language}\"\n            .active=\"${this.start}\"\n            .dateFrom=\"${this.start}\"\n            .dateTo=\"${this.end}\"\n            .header=\"${value}\"\n            @filter=\"${this.dateChanged.bind(this)}\">\n          </ld-header-with-date-and-sort>`;\n      } else if (this.type === 'dateSortNoRange') {\n        this.html = (value: string, p: string) => html`\n          <ld-header-with-date-and-sort\n            .horizontalAlign=\"${this.horizontalAlign}\"\n            dateFormat=\"dd/MM/yyyy\"\n            data-property=\"${p}\"\n            .property=\"${p}\"\n            @direction-changed=\"${this.handleSortDirectionChanged.bind(this, p)}\"\n            .direction=\"${this.getSortDirection(this.sort, p)}\"\n            .language=\"${this.language}\"\n            .active=\"${this.start}\"\n            .dateFrom=\"${this.start}\"\n            .dateTo=\"${this.end}\"\n            .header=\"${value}\"\n            .noRange=\"${true}\"\n            @filter=\"${this.dateChanged.bind(this)}\">\n          </ld-header-with-date-and-sort>`;\n      }\n    }\n    if (properties.has('type') || properties.has('sort') || properties.has('filterValue')) {\n      if (this.type === 'filterSort') {\n        this.html = (value: string, p: string) => html`\n          <ld-header-with-filter-and-sort\n            .active=\"${!!this.filterValue}\"\n            .filterValue=\"${this.filterValue}\"\n            .language=\"${this.language}\"\n            data-property=\"${p}\"\n            .property=\"${p}\"\n            @direction-changed=\"${this.handleSortDirectionChanged.bind(this, p)}\"\n            .direction=\"${this.getSortDirection(this.sort, p)}\"\n            .header=\"${value}\"\n            @filter-value-changed=\"${this.handleFilterTextChanged.bind(this)}\">\n          </ld-header-with-filter-and-sort>`;\n      }\n    }\n  }\n\n  getSortDirection(sort: string, p: string) {\n    if (sort) {\n      const splittedSort = this.sort.split(',');\n      if (splittedSort) {\n        if (splittedSort[0] === p) {\n          return splittedSort[1];\n        }\n      }\n    }\n    return '';\n  }\n\n  handleSortDirectionChanged(p: string, { detail }: CustomEvent<{value: string}>) {\n    const splittedSort = this.sort.split(',');\n    if (detail.value) {\n      this.sort = `${p},${detail.value}`;\n      this.dispatchEvent(new CustomEvent('sort', { detail: { value: this.sort } }));\n    } else if (splittedSort && splittedSort[0] === p) {\n      this.sort = '';\n      this.dispatchEvent(new CustomEvent('sort', { detail: { value: this.sort } }));\n    }\n  }\n\n  handleFilterTextChanged({ detail }: CustomEvent) {\n    if (this.timeoutFilterText) {\n      clearTimeout(this.timeoutFilterText);\n    }\n\n    this.timeoutFilterText = window.setTimeout(\n      () => this.dispatchEvent(new CustomEvent('filter', { detail })),\n      1000\n    );\n  }\n\n  handleFilterChoiceChanged({ detail }: CustomEvent) {\n    this.dispatchEvent(new CustomEvent('choices', { detail }));\n  }\n\n  dateChanged({ detail }: CustomEvent) {\n    this.dispatchEvent(new CustomEvent('dates', { detail }));\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lit-datatable-column': LitDatatableColumn;\n  }\n}\n"]}