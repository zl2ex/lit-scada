{"version":3,"file":"ld-header-with-date-and-sort.js","sourceRoot":"","sources":["ld-header-with-date-and-sort.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  LitElement, css, html, PropertyValues\n} from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\nimport '@polymer/paper-input/paper-input';\nimport '@polymer/paper-icon-button/paper-icon-button';\nimport '@polymer/iron-flex-layout/iron-flex-layout-classes';\nimport '@doubletrade/lit-datepicker/lit-datepicker-input';\nimport { ironFlexLayoutAlignTheme, ironFlexLayoutTheme } from '../iron-flex-import';\nimport './ld-header-with-sort';\nimport { Language } from '../localize';\n\n@customElement('ld-header-with-date-and-sort')\nexport class LdHeaderWithDateAndSort extends LitElement {\n  @property({ type: String }) header = '';\n\n  language: Language | null = 'en';\n\n  @property({ type: String }) dateFormat = '';\n\n  @property({ type: String }) property = '';\n\n  @property({ type: String }) direction: '' | 'asc' | 'desc' = '';\n\n  @property({ type: Boolean }) active = false;\n\n  @property({ type: String }) dateFrom: string | null = null;\n\n  @property({ type: String }) dateTo: string | null = null;\n\n  @property({ type: Boolean }) noRange = false;\n\n  @property({ type: String }) horizontalAlign: 'left' | 'right' = 'right';\n\n  static get styles() {\n    const mainStyle = css`\n      :host {\n        display: block;\n      }\n      .actions {\n        padding-left: 8px;\n      }\n      paper-icon-button {\n        padding: 0;\n        min-width: 24px;\n        min-height: 24px;\n        width: 24px;\n        height: 24px;\n        --paper-icon-button: {\n          color: var(--paper-icon-button-color);\n        }\n\n        --paper-icon-button-hover: {\n          color: var(--paper-icon-button-color-hover);\n        }\n      }`;\n    return [mainStyle, ironFlexLayoutTheme, ironFlexLayoutAlignTheme];\n  }\n\n  render() {\n    const input = (dateFrom: string, dateTo: string, noRange: boolean) => html`\n      <style>\n        paper-input {\n          min-width: var(--paper-datatable-api-min-width-input-filter, 120px);\n          --paper-input-container-underline-focus: {\n            display: block;\n          }\n          ;\n          --paper-input-container-label: {\n            position: initial;\n          }\n          ;\n          --paper-input-container: {\n            padding: 0;\n          }\n          ;\n          --paper-input-container-input: {\n            font-size: 12px;\n          }\n          ;\n        }\n      </style>\n\n      <paper-input\n        no-label-float\n        placeholder=\"${this.header}\"\n        value=\"${this.computeDate(dateFrom, dateTo, noRange)}\"\n        readonly>\n      </paper-input>`;\n    return html`\n      ${this.active ? html`\n        <ld-header-with-sort @direction-changed=\"${this.directionChanged.bind(this)}\" .direction=\"${this.direction}\" .language=\"${this.language}\">\n          <div class=\"layout horizontal center\">\n            <lit-datepicker-input\n              .html=\"${input}\"\n              .noRange=\"${this.noRange}\"\n              .horizontalAlign=\"${this.horizontalAlign}\"\n              .dateFormat=\"${this.dateFormat}\"\n              .locale=\"${this.language}\"\n              .dateFrom=\"${this.dateFrom}\"\n              .dateTo=\"${this.dateTo}\"\n              @date-from-changed=\"${this.dateFromChanged}\"\n              @date-to-changed=\"${this.dateToChanged}\"\n              forceNarrow>\n            </lit-datepicker-input>\n            <paper-icon-button icon=\"clear\" @tap=\"${this.clearDate.bind(this)}\"></paper-icon-button>\n          </div>\n        </ld-header-with-sort>` : html`\n        <ld-header-with-sort @direction-changed=\"${this.directionChanged.bind(this)}\" .direction=\"${this.direction}\" .language=\"${this.language}\">\n          <div @tap=\"${this.toggleActive.bind(this)}\">\n            ${this.header}\n          </div>\n          <div class=\"actions\" slot=\"actions\">\n            <paper-icon-button icon=\"icons:date-range\" @tap=\"${this.toggleActive.bind(this)}\"></paper-icon-button>\n          </div>\n        </ld-header-with-sort>`}`;\n  }\n\n  updated(properties: PropertyValues) {\n    if (properties.has('direction')) {\n      this.dispatchEvent(new CustomEvent('direction-changed', { detail: { value: this.direction } }));\n    }\n\n    if (properties.has('active')) {\n      this.dispatchEvent(new CustomEvent('active-changed', { detail: { value: this.active } }));\n    }\n  }\n\n  dateToChanged({ detail }: CustomEvent<{value: string}>) {\n    if (this.dateFrom && detail.value) {\n      this.dateTo = detail.value;\n      this.dispatchEvent(new CustomEvent('filter', {\n        detail: {\n          dateFrom: parseInt(this.dateFrom, 10),\n          dateTo: parseInt(detail.value, 10),\n          property: this.property,\n        },\n      }));\n    }\n  }\n\n  dateFromChanged({ detail }: CustomEvent<{value: string}>) {\n    if (detail.value) {\n      this.dateFrom = detail.value;\n      if (this.noRange) {\n        this.dispatchEvent(new CustomEvent('filter', {\n          detail: {\n            dateFrom: parseInt(detail.value, 10),\n            property: this.property,\n          },\n        }));\n      }\n    }\n  }\n\n  async toggleActive() {\n    this.active = !this.active;\n    if (!this.active) {\n      this.dateFrom = null;\n      this.dateTo = null;\n    }\n    await this.updateComplete;\n    if (this.shadowRoot) {\n      const paperInput = this.shadowRoot.querySelector('paper-input');\n      if (paperInput) {\n        paperInput.setAttribute('tabindex', '1');\n        await this.updateComplete;\n        paperInput.focus();\n      }\n    }\n  }\n\n  computeDate(dateFrom: string | null, dateTo: string | null, noRange: boolean) {\n    if (dateFrom && dateTo) {\n      return `${dateFrom} ${dateTo}`;\n    }\n    if (noRange && dateFrom) {\n      return dateFrom;\n    }\n    return '';\n  }\n\n  clearDate() {\n    this.toggleActive();\n    this.dispatchEvent(new CustomEvent('filter', {\n      detail: {\n        dateFrom: null,\n        dateTo: null,\n        property: this.property,\n      },\n    }));\n  }\n\n  directionChanged({ detail }: CustomEvent<{value: '' | 'asc' | 'desc'}>) {\n    this.direction = detail.value;\n  }\n}\n"]}