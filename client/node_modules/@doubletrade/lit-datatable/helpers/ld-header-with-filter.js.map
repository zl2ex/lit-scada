{"version":3,"file":"ld-header-with-filter.js","sourceRoot":"","sources":["ld-header-with-filter.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, css, html } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\nimport '@polymer/paper-input/paper-input';\nimport '@polymer/paper-icon-button/paper-icon-button';\nimport type { Language, Resources } from '../localize';\nimport Localize from '../localize';\n\nimport { ironFlexLayoutAlignTheme, ironFlexLayoutTheme } from '../iron-flex-import';\n\n@customElement('ld-header-with-filter')\nexport default class LdHeaderWithFilter extends Localize(LitElement) {\n  @property({ type: String }) header = '';\n\n  @property({ type: String }) direction: '' | 'asc' | 'desc' = '';\n\n  @property({ type: Boolean }) active = false;\n\n  @property({ type: String }) filterValue: string | null = null;\n\n  @property({ type: String }) property = '';\n\n  language: Language | null = 'en';\n\n  resources: Resources | null = {\n    en: {\n      search: 'Search',\n      clear: 'Clear',\n    },\n    'en-en': {\n      search: 'Search',\n      clear: 'Clear',\n    },\n    'en-US': {\n      search: 'Search',\n      clear: 'Clear',\n    },\n    'en-us': {\n      search: 'Search',\n      clear: 'Clear',\n    },\n    fr: {\n      search: 'Rechercher',\n      clear: 'Effacer',\n    },\n    'fr-fr': {\n      search: 'Rechercher',\n      clear: 'Effacer',\n    },\n  };\n\n  static get styles() {\n    const mainStyle = css`\n      :host {\n        display: block;\n      }\n\n      paper-input {\n        min-width: var(--paper-datatable-api-min-width-input-filter, 120px);\n      }\n\n      paper-icon-button {\n        padding: 0;\n        width: 24px;\n        height: 24px;\n      }\n\n      .header {\n        margin-right: 16px;\n      }`;\n    return [mainStyle, ironFlexLayoutTheme, ironFlexLayoutAlignTheme];\n  }\n\n  render() {\n    let content = html`\n      <div class=\"layout horizontal center\">\n        <div class=\"header\" @tap=\"${this.toggleActive.bind(this)}\">\n          ${this.header}\n        </div>\n        <paper-icon-button id=\"searchBtn\" slot=\"actions\" icon=\"search\" @tap=\"${this.toggleActive.bind(this)}\"></paper-icon-button>\n        <paper-tooltip for=\"searchBtn\" slot=\"actions\">${this.localize('search')}</paper-tooltip>\n      </div>\n    `;\n    if (this.active) {\n      content = html`\n        <style>\n          paper-input {\n            --paper-input-container-underline-focus: {\n              display: block;\n            };\n            --paper-input-container-label: {\n              position: initial;\n            };\n            --paper-input-container: {\n              padding: 0;\n            };\n            --paper-input-container-input: {\n              font-size: 7px;\n            };\n          }\n\n          paper-icon-button {\n            --paper-icon-button: {\n              color: var(--paper-icon-button-color);\n            }\n\n            --paper-icon-button-hover: {\n              color: var(--paper-icon-button-color-hover);\n            }\n          }\n        </style>\n        <paper-input\n          no-label-float\n          .placeholder=\"${this.header}\"\n          .value=\"${this.filterValue}\"\n          @value-changed=\"${this.valueChanged.bind(this)}\">\n          <paper-icon-button\n            id=\"clearBtn\"\n            icon=\"clear\"\n            slot=\"suffix\"\n            @tap=\"${this.toggleActive.bind(this)}\"></paper-icon-button>\n          <paper-tooltip\n            for=\"clearBtn\"\n            slot=\"suffix\">\n            ${this.localize('clear')}\n          </paper-tooltip>\n        </paper-input>`;\n    }\n    return content;\n  }\n\n  async toggleActive() {\n    this.active = !this.active;\n    this.dispatchEvent(new CustomEvent('active-changed', { detail: { value: this.active } }));\n    if (!this.active && this.filterValue) {\n      this.filterValue = null;\n      this.dispatchFilterEvent();\n    } else {\n      await this.updateComplete;\n      if (this.shadowRoot) {\n        const paperInput = this.shadowRoot.querySelector('paper-input');\n        if (paperInput) {\n          paperInput.setAttribute('tabindex', '1');\n          paperInput.focus();\n        }\n      }\n    }\n  }\n\n  directionChanged({ detail }: CustomEvent<{value: 'asc' | 'desc' | ''}>) {\n    if (this.direction !== detail.value) {\n      this.direction = detail.value;\n      this.dispatchEvent(new CustomEvent('direction-changed', { detail: { value: this.direction } }));\n    }\n  }\n\n  valueChanged({ detail }: CustomEvent<{value: string}>) {\n    if (this.filterValue !== detail.value) {\n      this.filterValue = detail.value;\n      this.dispatchFilterEvent();\n    }\n  }\n\n  dispatchFilterEvent() {\n    this.dispatchEvent(new CustomEvent('filter-value-changed', { detail: { value: this.filterValue, property: this.property } }));\n  }\n}\n"]}