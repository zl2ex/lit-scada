{"version":3,"file":"ld-header-with-filter-and-sort.js","sourceRoot":"","sources":["ld-header-with-filter-and-sort.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, css, html } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\nimport '@polymer/paper-input/paper-input';\nimport '@polymer/paper-icon-button/paper-icon-button';\nimport Localize from '../localize';\nimport './ld-header-with-sort';\n\n@customElement('ld-header-with-filter-and-sort')\nexport class LdHeaderWithFilterAndSort extends Localize(LitElement) {\n  @property({ type: String }) header = '';\n\n  @property({ type: String }) direction: '' | 'asc' | 'desc' = '';\n\n  @property({ type: Boolean }) active = false;\n\n  @property({ type: String }) filterValue: string | null = null;\n\n  @property({ type: String }) property = '';\n\n  resources = {\n    en: {\n      search: 'Search',\n      clear: 'Clear',\n    },\n    'en-en': {\n      search: 'Search',\n      clear: 'Clear',\n    },\n    'en-US': {\n      search: 'Search',\n      clear: 'Clear',\n    },\n    'en-us': {\n      search: 'Search',\n      clear: 'Clear',\n    },\n    fr: {\n      search: 'Rechercher',\n      clear: 'Effacer',\n    },\n    'fr-fr': {\n      search: 'Rechercher',\n      clear: 'Effacer',\n    },\n  };\n\n  static get styles() {\n    const mainStyle = css`\n      :host {\n        display: block;\n      }\n\n      paper-input {\n        min-width: var(--paper-datatable-api-min-width-input-filter, 120px);\n        --paper-input-container-underline-focus: {\n          display: block;\n        }\n        ;\n        --paper-input-container-label: {\n          position: initial;\n        }\n        ;\n        --paper-input-container: {\n          padding: 0;\n        }\n        ;\n        --paper-input-container-input: {\n          font-size: 12px;\n        }\n        ;\n      }\n\n      paper-icon-button {\n        --paper-icon-button: {\n          color: var(--paper-icon-button-color);\n        }\n\n        --paper-icon-button-hover: {\n          color: var(--paper-icon-button-color-hover);\n        }\n      }\n\n      .header {\n        margin-right: 16px;\n      }`;\n    return [mainStyle];\n  }\n\n  render() {\n    let content = html`\n      <div class=\"header\" @tap=\"${this.toggleActive.bind(this)}\">\n        ${this.header}\n      </div>\n      <paper-icon-button id=\"searchBtn\" slot=\"actions\" icon=\"search\" @tap=\"${this.toggleActive.bind(this)}\"></paper-icon-button>\n      <paper-tooltip for=\"searchBtn\" slot=\"actions\">${this.localize('search')}</paper-tooltip>\n    `;\n    if (this.active) {\n      content = html`\n        <paper-input\n          no-label-float\n          .placeholder=\"${this.header}\"\n          .value=\"${this.filterValue}\"\n          @value-changed=\"${this.valueChanged.bind(this)}\">\n          <paper-icon-button\n            id=\"clearBtn\"\n            icon=\"clear\"\n            slot=\"suffix\"\n            @tap=\"${this.toggleActive.bind(this)}\"></paper-icon-button>\n          <paper-tooltip\n            for=\"clearBtn\"\n            slot=\"suffix\">\n            ${this.localize('clear')}\n          </paper-tooltip>\n        </paper-input>`;\n    }\n    return html`\n      <ld-header-with-sort\n        .direction=\"${this.direction}\"\n        .language=\"${this.language}\"\n        @direction-changed=\"${this.directionChanged.bind(this)}\">\n        ${content}\n      </ld-header-with-sort>`;\n  }\n\n  async toggleActive() {\n    this.active = !this.active;\n    this.dispatchEvent(new CustomEvent('active-changed', { detail: { value: this.active } }));\n    if (!this.active && this.filterValue) {\n      this.filterValue = null;\n      this.dispatchFilterEvent();\n    } else {\n      await this.updateComplete;\n      if (this.shadowRoot) {\n        const paperInput = this.shadowRoot.querySelector('paper-input');\n        if (paperInput) {\n          paperInput.setAttribute('tabindex', '1');\n          paperInput.focus();\n        }\n      }\n    }\n  }\n\n  directionChanged({ detail }: CustomEvent<{value: '' | 'asc' | 'desc'}>) {\n    if (this.direction !== detail.value) {\n      this.direction = detail.value;\n      this.dispatchEvent(new CustomEvent('direction-changed', { detail: { value: this.direction } }));\n    }\n  }\n\n  valueChanged({ detail }: CustomEvent<{value: string}>) {\n    if (this.filterValue !== detail.value) {\n      this.filterValue = detail.value;\n      this.dispatchFilterEvent();\n    }\n  }\n\n  dispatchFilterEvent() {\n    this.dispatchEvent(new CustomEvent('filter-value-changed', { detail: { value: this.filterValue, property: this.property } }));\n  }\n}\n"]}